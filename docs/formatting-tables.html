<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Formatting Tables | jmvScaffold: R functions to develop jamovi modules</title>
  <meta name="description" content="It provise some explanations about using the package to develop jamovi modules" />
  <meta name="generator" content="bookdown 0.32 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Formatting Tables | jmvScaffold: R functions to develop jamovi modules" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="It provise some explanations about using the package to develop jamovi modules" />
  <meta name="github-repo" content="mcfanda/jmvScaffold" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Formatting Tables | jmvScaffold: R functions to develop jamovi modules" />
  
  <meta name="twitter:description" content="It provise some explanations about using the package to develop jamovi modules" />
  

<meta name="author" content="Marcello Gallucci" />


<meta name="date" content="2023-01-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="warning-failing-and-debuging.html"/>
<link rel="next" href="smart-tables-update.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="mcstyle.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">jmvScaffold howto</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="booklet.html"><a href="booklet.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="booklet.html"><a href="booklet.html#preface"><i class="fa fa-check"></i><b>1.1</b> Preface</a></li>
<li class="chapter" data-level="1.2" data-path="booklet.html"><a href="booklet.html#getstarted"><i class="fa fa-check"></i><b>1.2</b> Getting Started</a></li>
<li class="chapter" data-level="1.3" data-path="booklet.html"><a href="booklet.html#createmodule"><i class="fa fa-check"></i><b>1.3</b> Create a module</a></li>
<li class="chapter" data-level="1.4" data-path="booklet.html"><a href="booklet.html#defining-the-analysis"><i class="fa fa-check"></i><b>1.4</b> Defining the analysis</a></li>
<li class="chapter" data-level="1.5" data-path="booklet.html"><a href="booklet.html#jamovi-analysis"><i class="fa fa-check"></i><b>1.5</b> jamovi analysis</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="interface.html"><a href="interface.html"><i class="fa fa-check"></i><b>2</b> Interface</a>
<ul>
<li class="chapter" data-level="2.1" data-path="interface.html"><a href="interface.html#options-.a.yaml"><i class="fa fa-check"></i><b>2.1</b> Options (.a.yaml)</a></li>
<li class="chapter" data-level="2.2" data-path="interface.html"><a href="interface.html#layout-.u.yaml"><i class="fa fa-check"></i><b>2.2</b> Layout (.u.yaml)</a></li>
<li class="chapter" data-level="2.3" data-path="interface.html"><a href="interface.html#compile"><i class="fa fa-check"></i><b>2.3</b> Compiling the jamovi module</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="chapter3.html"><a href="chapter3.html"><i class="fa fa-check"></i><b>3</b> Results</a>
<ul>
<li class="chapter" data-level="3.1" data-path="chapter3.html"><a href="chapter3.html#preparing-the-results"><i class="fa fa-check"></i><b>3.1</b> Preparing the results</a></li>
<li class="chapter" data-level="3.2" data-path="chapter3.html"><a href="chapter3.html#defining-the-result-tables-.r.yaml"><i class="fa fa-check"></i><b>3.2</b> Defining the result tables (.r.yaml)</a></li>
<li class="chapter" data-level="3.3" data-path="chapter3.html"><a href="chapter3.html#r-code-for-jamovi"><i class="fa fa-check"></i><b>3.3</b> R code for jamovi</a></li>
<li class="chapter" data-level="3.4" data-path="chapter3.html"><a href="chapter3.html#initialize-a-table"><i class="fa fa-check"></i><b>3.4</b> Initialize a table</a></li>
<li class="chapter" data-level="3.5" data-path="chapter3.html"><a href="chapter3.html#populating-a-table"><i class="fa fa-check"></i><b>3.5</b> Populating a table</a></li>
<li class="chapter" data-level="3.6" data-path="chapter3.html"><a href="chapter3.html#passing-data-to-smarttables"><i class="fa fa-check"></i><b>3.6</b> Passing data to SmartTables</a></li>
<li class="chapter" data-level="3.7" data-path="chapter3.html"><a href="chapter3.html#automatic-filling-of-tables."><i class="fa fa-check"></i><b>3.7</b> Automatic filling of tables.</a></li>
<li class="chapter" data-level="3.8" data-path="chapter3.html"><a href="chapter3.html#r6-classes-to-run-complex-modules"><i class="fa fa-check"></i><b>3.8</b> R6 classes to run complex modules</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="advanced-results-objects.html"><a href="advanced-results-objects.html"><i class="fa fa-check"></i><b>4</b> Advanced Results Objects</a>
<ul>
<li class="chapter" data-level="4.1" data-path="advanced-results-objects.html"><a href="advanced-results-objects.html#introduction"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="advanced-results-objects.html"><a href="advanced-results-objects.html#groups-jmvcoregroup"><i class="fa fa-check"></i><b>4.2</b> Groups (jmvcore::Group)</a></li>
<li class="chapter" data-level="4.3" data-path="advanced-results-objects.html"><a href="advanced-results-objects.html#arrays-of-tables-jmvcorearray"><i class="fa fa-check"></i><b>4.3</b> Arrays of tables (jmvcore::Array)</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="advanced-results-objects.html"><a href="advanced-results-objects.html#array-known-number-of-tables"><i class="fa fa-check"></i><b>4.3.1</b> Array: known number of tables</a></li>
<li class="chapter" data-level="4.3.2" data-path="advanced-results-objects.html"><a href="advanced-results-objects.html#array-unknown-number-of-tables"><i class="fa fa-check"></i><b>4.3.2</b> Array: Unknown number of tables</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="advanced-results-objects.html"><a href="advanced-results-objects.html#other-results-objects"><i class="fa fa-check"></i><b>4.4</b> Other Results objects</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="dynamic-tables-display.html"><a href="dynamic-tables-display.html"><i class="fa fa-check"></i><b>5</b> Dynamic Tables Display</a>
<ul>
<li class="chapter" data-level="5.1" data-path="dynamic-tables-display.html"><a href="dynamic-tables-display.html#introduction-1"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="dynamic-tables-display.html"><a href="dynamic-tables-display.html#showing-table-on-options-change"><i class="fa fa-check"></i><b>5.2</b> Showing table on options change</a></li>
<li class="chapter" data-level="5.3" data-path="dynamic-tables-display.html"><a href="dynamic-tables-display.html#showing-tables-programmatically"><i class="fa fa-check"></i><b>5.3</b> Showing tables programmatically</a></li>
<li class="chapter" data-level="5.4" data-path="dynamic-tables-display.html"><a href="dynamic-tables-display.html#additional-strategies"><i class="fa fa-check"></i><b>5.4</b> Additional strategies</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="warning-failing-and-debuging.html"><a href="warning-failing-and-debuging.html"><i class="fa fa-check"></i><b>6</b> Warning, Failing and Debuging</a>
<ul>
<li class="chapter" data-level="6.1" data-path="warning-failing-and-debuging.html"><a href="warning-failing-and-debuging.html#introduction-2"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="warning-failing-and-debuging.html"><a href="warning-failing-and-debuging.html#tables-debugging"><i class="fa fa-check"></i><b>6.2</b> Tables debugging</a></li>
<li class="chapter" data-level="6.3" data-path="warning-failing-and-debuging.html"><a href="warning-failing-and-debuging.html#mark-landmarks"><i class="fa fa-check"></i><b>6.3</b> Mark landmarks</a></li>
<li class="chapter" data-level="6.4" data-path="warning-failing-and-debuging.html"><a href="warning-failing-and-debuging.html#automatic-errors"><i class="fa fa-check"></i><b>6.4</b> Automatic Errors</a></li>
<li class="chapter" data-level="6.5" data-path="warning-failing-and-debuging.html"><a href="warning-failing-and-debuging.html#awarnings"><i class="fa fa-check"></i><b>6.5</b> Automatic Warnings</a></li>
<li class="chapter" data-level="6.6" data-path="warning-failing-and-debuging.html"><a href="warning-failing-and-debuging.html#codewarnings"><i class="fa fa-check"></i><b>6.6</b> Code-generated Warnings and Messages</a></li>
<li class="chapter" data-level="6.7" data-path="warning-failing-and-debuging.html"><a href="warning-failing-and-debuging.html#transient-messages"><i class="fa fa-check"></i><b>6.7</b> Transient messages</a></li>
<li class="chapter" data-level="6.8" data-path="warning-failing-and-debuging.html"><a href="warning-failing-and-debuging.html#capturing-warnings-and-errors"><i class="fa fa-check"></i><b>6.8</b> Capturing warnings and errors</a></li>
<li class="chapter" data-level="6.9" data-path="warning-failing-and-debuging.html"><a href="warning-failing-and-debuging.html#unwanted-or-unfriendly-warnings"><i class="fa fa-check"></i><b>6.9</b> Unwanted or unfriendly warnings</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="formatting-tables.html"><a href="formatting-tables.html"><i class="fa fa-check"></i><b>7</b> Formatting Tables</a>
<ul>
<li class="chapter" data-level="7.1" data-path="formatting-tables.html"><a href="formatting-tables.html#introduction-3"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="formatting-tables.html"><a href="formatting-tables.html#initializing-the-table"><i class="fa fa-check"></i><b>7.2</b> Initializing the table</a></li>
<li class="chapter" data-level="7.3" data-path="formatting-tables.html"><a href="formatting-tables.html#combining-below"><i class="fa fa-check"></i><b>7.3</b> Combining below</a></li>
<li class="chapter" data-level="7.4" data-path="formatting-tables.html"><a href="formatting-tables.html#add-spaces-between-rows"><i class="fa fa-check"></i><b>7.4</b> Add spaces between rows</a></li>
<li class="chapter" data-level="7.5" data-path="formatting-tables.html"><a href="formatting-tables.html#indent-some-row-value"><i class="fa fa-check"></i><b>7.5</b> Indent some row value</a></li>
<li class="chapter" data-level="7.6" data-path="formatting-tables.html"><a href="formatting-tables.html#showing-columns-when-needed"><i class="fa fa-check"></i><b>7.6</b> Showing columns when needed</a></li>
<li class="chapter" data-level="7.7" data-path="formatting-tables.html"><a href="formatting-tables.html#showing-columns-programmatically"><i class="fa fa-check"></i><b>7.7</b> Showing columns programmatically</a></li>
<li class="chapter" data-level="7.8" data-path="formatting-tables.html"><a href="formatting-tables.html#changing-column-names-programmatically"><i class="fa fa-check"></i><b>7.8</b> Changing column names programmatically</a></li>
<li class="chapter" data-level="7.9" data-path="formatting-tables.html"><a href="formatting-tables.html#super-titles"><i class="fa fa-check"></i><b>7.9</b> Super Titles</a></li>
<li class="chapter" data-level="7.10" data-path="formatting-tables.html"><a href="formatting-tables.html#something-else"><i class="fa fa-check"></i><b>7.10</b> Something else</a></li>
<li class="chapter" data-level="7.11" data-path="formatting-tables.html"><a href="formatting-tables.html#adding-columns-programmatically"><i class="fa fa-check"></i><b>7.11</b> Adding columns programmatically</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="smart-tables-update.html"><a href="smart-tables-update.html"><i class="fa fa-check"></i><b>8</b> Smart Tables Update</a>
<ul>
<li class="chapter" data-level="8.1" data-path="smart-tables-update.html"><a href="smart-tables-update.html#the-issue"><i class="fa fa-check"></i><b>8.1</b> The issue</a></li>
<li class="chapter" data-level="8.2" data-path="smart-tables-update.html"><a href="smart-tables-update.html#the-solution"><i class="fa fa-check"></i><b>8.2</b> The Solution</a></li>
<li class="chapter" data-level="8.3" data-path="smart-tables-update.html"><a href="smart-tables-update.html#bottom-line"><i class="fa fa-check"></i><b>8.3</b> Bottom line</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="appendixa.html"><a href="appendixa.html"><i class="fa fa-check"></i><b>A</b> Appendix A</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">jmvScaffold: R functions to develop jamovi modules</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="formatting-tables" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">Chapter 7</span> Formatting Tables<a href="formatting-tables.html#formatting-tables" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="introduction-3" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> Introduction<a href="formatting-tables.html#introduction-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now we can tune the look of our tables. We should, however, do a better job in initializing the tables. So far, we did not do anything in the <code>.init()</code> function but running the <code>$initTab()</code> function. Properly initiating the table makes the whole user experience much smoother and pleasant. To convince yourself about that, consider than our little module is very fast now, because we simply run a regression with a few variables. Ponder that your model may take time to obtain the results, maybe because you need to bootstrap, user has billions of data points, or the user has a huge dataset with hundreds of variables.</p>
<p>To appreciate the need for a proper initialization of the tables, let slow down our <code>Estimate()</code> function in the <code>Runner</code> by changing it like this, re-install and try changing variables or options in the module GUI, as a user would do (we removed the warnings and errors in this chapter).</p>
<div class="filename">
<span class="filename">File: R/Runner.R (<a href='https://github.com/mcfanda/COOLj/tree/Version.0.0.7/R/Runner.R' target='_blank'>Online version</a>)</span>
</div>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="formatting-tables.html#cb65-1" aria-hidden="true" tabindex="-1"></a>    estimate<span class="ot">=</span><span class="cf">function</span>() {</span>
<span id="cb65-2"><a href="formatting-tables.html#cb65-2" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb65-3"><a href="formatting-tables.html#cb65-3" aria-hidden="true" tabindex="-1"></a>      formula  <span class="ot">&lt;-</span> jmvcore<span class="sc">::</span><span class="fu">composeFormula</span>(self<span class="sc">$</span>analysis<span class="sc">$</span>options<span class="sc">$</span>dep,self<span class="sc">$</span>analysis<span class="sc">$</span>options<span class="sc">$</span>covs)</span>
<span id="cb65-4"><a href="formatting-tables.html#cb65-4" aria-hidden="true" tabindex="-1"></a>      self<span class="sc">$</span>model    <span class="ot">&lt;-</span> stats<span class="sc">::</span><span class="fu">lm</span>(formula,<span class="at">data=</span>self<span class="sc">$</span>analysis<span class="sc">$</span>data)</span>
<span id="cb65-5"><a href="formatting-tables.html#cb65-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">Sys.sleep</span>(<span class="dv">3</span>)</span>
<span id="cb65-6"><a href="formatting-tables.html#cb65-6" aria-hidden="true" tabindex="-1"></a>    },</span></code></pre></div>
<p>What happens with a slightly slower estimation is that the tables will expand and shrink every time the user changes some option, and the whole results section will flicker in an unpleasant way (try yourself after compiling the module with the last changes). To avoid that, we can set the dimensions of the table and fill some columns of it in the <code>$initTable()</code> function phase. <code>SmartTable</code> can be initiated by passing data in the <code>init()</code> phase, data that are typically the name of the rows, such as variables names, or some other fixed information.</p>
<p><code>SmartTable</code> objects <code>$initTab()</code> function inquires the <code>initSource</code> property (if set) or the <code>runner</code> <code>init_tablename()</code> function to get info to fill the tables in the init phase. You want to pass very fast and simple information, and let the actual data to come in in the <code>.run()</code> phase, when we call the <code>$runTable</code> function.</p>
<p>Let’s start with <code>effects</code> table, which does not look very good.</p>
<p><img src="pics/c3_output8.png" width="322" /></p>
<p>First, the variables are alternating in the column <code>Variable</code>, which is not a natural way to read the results. It would be better to have each variable with all its effect sizes and then another variable, and so on. So, first we sort the output by variable in the <code>Runner.R</code> filling function.</p>
<div class="filename">
<span class="filename">File: R/Runner.R (<a href='https://github.com/mcfanda/COOLj/tree/Version.0.0.7/R/Runner.R' target='_blank'>Online version</a>)</span>
</div>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="formatting-tables.html#cb66-1" aria-hidden="true" tabindex="-1"></a>    run_effects<span class="ot">=</span><span class="cf">function</span>() {</span>
<span id="cb66-2"><a href="formatting-tables.html#cb66-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-3"><a href="formatting-tables.html#cb66-3" aria-hidden="true" tabindex="-1"></a>      eps       <span class="ot">&lt;-</span>  effectsize<span class="sc">::</span><span class="fu">epsilon_squared</span>(self<span class="sc">$</span>model)</span>
<span id="cb66-4"><a href="formatting-tables.html#cb66-4" aria-hidden="true" tabindex="-1"></a>      eps_df    <span class="ot">&lt;-</span>  <span class="fu">data.frame</span>(<span class="at">var=</span>eps<span class="sc">$</span>Parameter,<span class="at">index=</span><span class="st">&quot;Epsilon^2&quot;</span>,<span class="at">value=</span>eps<span class="sc">$</span>Epsilon2)</span>
<span id="cb66-5"><a href="formatting-tables.html#cb66-5" aria-hidden="true" tabindex="-1"></a>      eta       <span class="ot">&lt;-</span>  effectsize<span class="sc">::</span><span class="fu">eta_squared</span>(self<span class="sc">$</span>model)</span>
<span id="cb66-6"><a href="formatting-tables.html#cb66-6" aria-hidden="true" tabindex="-1"></a>      eta_df    <span class="ot">&lt;-</span>  <span class="fu">data.frame</span>(<span class="at">var=</span>eta<span class="sc">$</span>Parameter,<span class="at">index=</span><span class="st">&quot;pEta^2&quot;</span>,<span class="at">value=</span>eta<span class="sc">$</span>Eta2)</span>
<span id="cb66-7"><a href="formatting-tables.html#cb66-7" aria-hidden="true" tabindex="-1"></a>      omega     <span class="ot">&lt;-</span>  effectsize<span class="sc">::</span><span class="fu">omega_squared</span>(self<span class="sc">$</span>model)</span>
<span id="cb66-8"><a href="formatting-tables.html#cb66-8" aria-hidden="true" tabindex="-1"></a>      omega_df  <span class="ot">&lt;-</span>  <span class="fu">data.frame</span>(<span class="at">var=</span>eta<span class="sc">$</span>Parameter,<span class="at">index=</span><span class="st">&quot;pOmega^2&quot;</span>,<span class="at">value=</span>omega<span class="sc">$</span>Omega2)</span>
<span id="cb66-9"><a href="formatting-tables.html#cb66-9" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb66-10"><a href="formatting-tables.html#cb66-10" aria-hidden="true" tabindex="-1"></a>      tab       <span class="ot">&lt;-</span>  <span class="fu">as.data.frame</span>(<span class="fu">rbind</span>(eps_df,eta_df,omega_df))</span>
<span id="cb66-11"><a href="formatting-tables.html#cb66-11" aria-hidden="true" tabindex="-1"></a>      tab       <span class="ot">&lt;-</span>  tab[<span class="fu">order</span>(tab<span class="sc">$</span>var),]  <span class="co"># we order the results by variable</span></span>
<span id="cb66-12"><a href="formatting-tables.html#cb66-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(tab)</span>
<span id="cb66-13"><a href="formatting-tables.html#cb66-13" aria-hidden="true" tabindex="-1"></a>    }</span></code></pre></div>
<p><img src="pics/c7_output1.png" width="339" /></p>
<p>Now we can format the table to our aestetic needs.</p>
</div>
<div id="initializing-the-table" class="section level2 hasAnchor" number="7.2">
<h2><span class="header-section-number">7.2</span> Initializing the table<a href="formatting-tables.html#initializing-the-table" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>At the <code>.init()</code> time, we know what the covariates that will be listed in the table and the labels of the effect sizes we want to show. We can pass this info to the table <code>$initTable</code> by defining in <code>Runner</code> a <code>init_additional_effects()</code> function. Recall that in the <code>.init()</code> phase we have all the options, the data definitions, but no estimation nor the actual data. This is made on purpose to keep the <code>.init()</code> phase light and fast.</p>
<p>In the Runner, we write.</p>
<div class="filename">
<span class="filename">File: R/Runner.R (<a href='https://github.com/mcfanda/COOLj/tree/Version.0.0.7/R/Runner.R' target='_blank'>Online version</a>)</span>
</div>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="formatting-tables.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co">#...#</span></span>
<span id="cb67-2"><a href="formatting-tables.html#cb67-2" aria-hidden="true" tabindex="-1"></a>    init_additional_effects<span class="ot">=</span><span class="cf">function</span>() {</span>
<span id="cb67-3"><a href="formatting-tables.html#cb67-3" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb67-4"><a href="formatting-tables.html#cb67-4" aria-hidden="true" tabindex="-1"></a>      covs      <span class="ot">&lt;-</span> self<span class="sc">$</span>analysis<span class="sc">$</span>options<span class="sc">$</span>covs</span>
<span id="cb67-5"><a href="formatting-tables.html#cb67-5" aria-hidden="true" tabindex="-1"></a>      es        <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;pEpsilon&quot;</span>,<span class="st">&quot;pEta&quot;</span>,<span class="st">&quot;pOmega&quot;</span>) </span>
<span id="cb67-6"><a href="formatting-tables.html#cb67-6" aria-hidden="true" tabindex="-1"></a>      tab       <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">expand.grid</span>(covs,es))</span>
<span id="cb67-7"><a href="formatting-tables.html#cb67-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">names</span>(tab)<span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;var&quot;</span>,<span class="st">&quot;index&quot;</span>)</span>
<span id="cb67-8"><a href="formatting-tables.html#cb67-8" aria-hidden="true" tabindex="-1"></a>      tab       <span class="ot">&lt;-</span> tab[<span class="fu">order</span>(tab<span class="sc">$</span>var),]</span>
<span id="cb67-9"><a href="formatting-tables.html#cb67-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(tab)</span>
<span id="cb67-10"><a href="formatting-tables.html#cb67-10" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb67-11"><a href="formatting-tables.html#cb67-11" aria-hidden="true" tabindex="-1"></a>      },</span>
<span id="cb67-12"><a href="formatting-tables.html#cb67-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-13"><a href="formatting-tables.html#cb67-13" aria-hidden="true" tabindex="-1"></a><span class="co">#...#</span></span></code></pre></div>
<p>We are passing to the <code>init_[tablename]</code> function a data.frame with the <code>var</code> and the <code>index</code> labels, that we know as soon as the GUI is updated. If you play around with the GUI of your module, you can notice that now the <code>Effects Size Indices</code> gets ready very quickly, with the correct number of rows, and it is finalized with the numerical values when the estimation is done.
(remove the <code>Sys.sleep(3)</code> for future usage)</p>
<p><em>Note</em>: one does not need to prepare a <code>init_tablename()</code> function for each table. It should be done for tables that require some formatting before hand, such as the formatting options discussed below.</p>
</div>
<div id="combining-below" class="section level2 hasAnchor" number="7.3">
<h2><span class="header-section-number">7.3</span> Combining below<a href="formatting-tables.html#combining-below" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>(ref. <a href='reference/SmartTable.html##public-fields-1' target='_blank'>SmartTable$CombineBelow</a>)</p>
<p>At this point, we can notice that the repetition of the <code>Variable</code> name makes the table a bit heavy (column name is <code>var</code>). We can make it look better by removing the repeated labels and let them print only when a new variable name appears. This can be done in the <code>.r.yaml</code> file by adding <code>combineBelow: true</code> property.</p>
<div class="filename">
<span class="filename">File: jamovi/myregression.r.yaml (<a href='https://github.com/mcfanda/COOLj/tree/Version.0.0.7/jamovi/myregression.r.yaml' target='_blank'>Online version</a>)</span>
</div>
<div class="sourceCode" id="cb68"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb68-1"><a href="formatting-tables.html#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co">#...#</span></span>
<span id="cb68-2"><a href="formatting-tables.html#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="at">             </span><span class="fu">type</span><span class="kw">:</span><span class="at"> Table</span></span>
<span id="cb68-3"><a href="formatting-tables.html#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="at">             </span><span class="fu">visible</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb68-4"><a href="formatting-tables.html#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="at">             </span><span class="fu">columns</span><span class="kw">:</span></span>
<span id="cb68-5"><a href="formatting-tables.html#cb68-5" aria-hidden="true" tabindex="-1"></a><span class="at">                    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> var</span></span>
<span id="cb68-6"><a href="formatting-tables.html#cb68-6" aria-hidden="true" tabindex="-1"></a><span class="at">                      </span><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Variable&quot;</span></span>
<span id="cb68-7"><a href="formatting-tables.html#cb68-7" aria-hidden="true" tabindex="-1"></a><span class="at">                      </span><span class="fu">type</span><span class="kw">:</span><span class="at"> text</span></span>
<span id="cb68-8"><a href="formatting-tables.html#cb68-8" aria-hidden="true" tabindex="-1"></a><span class="at">                      </span><span class="fu">combineBelow</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb68-9"><a href="formatting-tables.html#cb68-9" aria-hidden="true" tabindex="-1"></a><span class="at">                      ...</span></span>
<span id="cb68-10"><a href="formatting-tables.html#cb68-10" aria-hidden="true" tabindex="-1"></a><span class="co">#...#</span></span></code></pre></div>
<p>The results are more pleasantly looking.</p>
<p><img src="pics/c7_output2.png" width="342" /></p>
</div>
<div id="add-spaces-between-rows" class="section level2 hasAnchor" number="7.4">
<h2><span class="header-section-number">7.4</span> Add spaces between rows<a href="formatting-tables.html#add-spaces-between-rows" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>(ref. <a href='reference/SmartTable.html##public-fields-1' target='_blank'>SmartTable$spaceBy</a>)</p>
<p>Another way to make tables more pleasant looking is to add some space between rows that are someway logically separated. In our table <code>Effects Size Indices</code> we can separate a bit the sets of indices between variables. We can use <code>SmartTable</code> property <code>$spacyBy</code>. <code>spaceBy</code> accepts a column name or a vector of indices, indicating where to put the space. When the argument is a column name, or a vector of names, the space is inserted when the column changes value. In practices, we define the <code>SmartTable</code> like this.</p>
<div class="filename">
<span class="filename">File: R/myregression.b.R (<a href='https://github.com/mcfanda/COOLj/tree/Version.0.0.7/R/myregression.b.R' target='_blank'>Online version</a>)</span>
</div>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="formatting-tables.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co">#...#</span></span>
<span id="cb69-2"><a href="formatting-tables.html#cb69-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-3"><a href="formatting-tables.html#cb69-3" aria-hidden="true" tabindex="-1"></a>            atable          <span class="ot">&lt;-</span> SmartTable<span class="sc">$</span><span class="fu">new</span>(self<span class="sc">$</span>results<span class="sc">$</span>additional<span class="sc">$</span>effects,private<span class="sc">$</span>.runner)</span>
<span id="cb69-4"><a href="formatting-tables.html#cb69-4" aria-hidden="true" tabindex="-1"></a>            atable<span class="sc">$</span>spaceBy  <span class="ot">&lt;-</span> <span class="st">&quot;var&quot;</span> </span>
<span id="cb69-5"><a href="formatting-tables.html#cb69-5" aria-hidden="true" tabindex="-1"></a>            <span class="co"># put the SmartTable in the list</span></span>
<span id="cb69-6"><a href="formatting-tables.html#cb69-6" aria-hidden="true" tabindex="-1"></a>            private<span class="sc">$</span>.tables[[<span class="fu">length</span>(private<span class="sc">$</span>.tables)<span class="sc">+</span><span class="dv">1</span>]]<span class="ot">&lt;-</span>atable</span>
<span id="cb69-7"><a href="formatting-tables.html#cb69-7" aria-hidden="true" tabindex="-1"></a><span class="co">#...#</span></span></code></pre></div>
<p><img src="pics/c7_output3.png" width="320" /></p>
</div>
<div id="indent-some-row-value" class="section level2 hasAnchor" number="7.5">
<h2><span class="header-section-number">7.5</span> Indent some row value<a href="formatting-tables.html#indent-some-row-value" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>(ref. <a href='reference/SmartTable.html##public-fields-1' target='_blank'>SmartTable$indent</a>)</p>
<p>Another stylistic change we can make to our tables is to indent some row to improve readability. Indent can be passed to a <code>SmartTable</code> as a vector of rows indices. The values of the first column at the provided indices will be indent. As a quick example,
we indent the first row label of the <code>effects</code> table.</p>
<div class="filename">
<span class="filename">File: R/myregression.b.R (<a href='https://github.com/mcfanda/COOLj/tree/Version.0.0.7/R/myregression.b.R' target='_blank'>Online version</a>)</span>
</div>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="formatting-tables.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co">#...#</span></span>
<span id="cb70-2"><a href="formatting-tables.html#cb70-2" aria-hidden="true" tabindex="-1"></a>            atable<span class="ot">&lt;-</span>SmartTable<span class="sc">$</span><span class="fu">new</span>(self<span class="sc">$</span>results<span class="sc">$</span>additional<span class="sc">$</span>effects,private<span class="sc">$</span>.runner)</span>
<span id="cb70-3"><a href="formatting-tables.html#cb70-3" aria-hidden="true" tabindex="-1"></a>            atable<span class="sc">$</span>spaceBy <span class="ot">&lt;-</span> <span class="st">&quot;var&quot;</span></span>
<span id="cb70-4"><a href="formatting-tables.html#cb70-4" aria-hidden="true" tabindex="-1"></a>            atable<span class="sc">$</span>indent <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb70-5"><a href="formatting-tables.html#cb70-5" aria-hidden="true" tabindex="-1"></a>            <span class="co"># put the SmartTable in the list</span></span>
<span id="cb70-6"><a href="formatting-tables.html#cb70-6" aria-hidden="true" tabindex="-1"></a>            private<span class="sc">$</span>.tables[[<span class="fu">length</span>(private<span class="sc">$</span>.tables)<span class="sc">+</span><span class="dv">1</span>]]<span class="ot">&lt;-</span>atable</span>
<span id="cb70-7"><a href="formatting-tables.html#cb70-7" aria-hidden="true" tabindex="-1"></a><span class="co">#...#</span></span></code></pre></div>
<p><img src="pics/c7_output4.png" width="402" /></p>
</div>
<div id="showing-columns-when-needed" class="section level2 hasAnchor" number="7.6">
<h2><span class="header-section-number">7.6</span> Showing columns when needed<a href="formatting-tables.html#showing-columns-when-needed" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are applications in which one or more columns of a table are not always necessary, so you want to show them only when needed. An example would be to show the confidence intervals of our effect size indices only when the user requires them flagging an option. In other situations, you do not know in advanced if the column is needed, because its relevance depends on the obtained results. <span class="jamovi"><a href="http://www.jamovi.org" target="_blank">jamovi</a></span> allows handling these cases.</p>
<p>Linking a column visibility to an option is the easiest way. Lets’ define an option in the <code>.a.yaml</code> file to toggle confidence intervals appearance.</p>
<div class="filename">
<span class="filename">File: jamovi/myregression.a.yaml (<a href='https://github.com/mcfanda/COOLj/tree/Version.0.0.7/jamovi/myregression.a.yaml' target='_blank'>Online version</a>)</span>
</div>
<div class="sourceCode" id="cb71"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb71-1"><a href="formatting-tables.html#cb71-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-2"><a href="formatting-tables.html#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> show_ci</span></span>
<span id="cb71-3"><a href="formatting-tables.html#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">title</span><span class="kw">:</span><span class="at"> ES CI</span></span>
<span id="cb71-4"><a href="formatting-tables.html#cb71-4" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">type</span><span class="kw">:</span><span class="at"> Bool</span></span>
<span id="cb71-5"><a href="formatting-tables.html#cb71-5" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">default</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span></code></pre></div>
<p>and change <code>effects</code> table in the <code>.r.yaml</code> file</p>
<div class="filename">
<span class="filename">File: jamovi/myregression.r.yaml (<a href='https://github.com/mcfanda/COOLj/tree/Version.0.0.7/jamovi/myregression.r.yaml' target='_blank'>Online version</a>)</span>
</div>
<div class="sourceCode" id="cb72"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb72-1"><a href="formatting-tables.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co">#...#</span></span>
<span id="cb72-2"><a href="formatting-tables.html#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="at">       </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> additional</span></span>
<span id="cb72-3"><a href="formatting-tables.html#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="at">         </span><span class="fu">type</span><span class="kw">:</span><span class="at"> Group</span></span>
<span id="cb72-4"><a href="formatting-tables.html#cb72-4" aria-hidden="true" tabindex="-1"></a><span class="at">         </span><span class="fu">title</span><span class="kw">:</span><span class="at"> Additional Results</span></span>
<span id="cb72-5"><a href="formatting-tables.html#cb72-5" aria-hidden="true" tabindex="-1"></a><span class="at">         </span><span class="fu">items</span><span class="kw">:</span></span>
<span id="cb72-6"><a href="formatting-tables.html#cb72-6" aria-hidden="true" tabindex="-1"></a><span class="at">           </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> effects</span></span>
<span id="cb72-7"><a href="formatting-tables.html#cb72-7" aria-hidden="true" tabindex="-1"></a><span class="at">             </span><span class="fu">title</span><span class="kw">:</span><span class="at">  Effect Size Indices</span></span>
<span id="cb72-8"><a href="formatting-tables.html#cb72-8" aria-hidden="true" tabindex="-1"></a><span class="at">             </span><span class="fu">type</span><span class="kw">:</span><span class="at"> Table</span></span>
<span id="cb72-9"><a href="formatting-tables.html#cb72-9" aria-hidden="true" tabindex="-1"></a><span class="at">             </span><span class="fu">visible</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb72-10"><a href="formatting-tables.html#cb72-10" aria-hidden="true" tabindex="-1"></a><span class="at">             </span><span class="fu">columns</span><span class="kw">:</span></span>
<span id="cb72-11"><a href="formatting-tables.html#cb72-11" aria-hidden="true" tabindex="-1"></a><span class="at">                    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> var</span></span>
<span id="cb72-12"><a href="formatting-tables.html#cb72-12" aria-hidden="true" tabindex="-1"></a><span class="at">                      </span><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Variable&quot;</span></span>
<span id="cb72-13"><a href="formatting-tables.html#cb72-13" aria-hidden="true" tabindex="-1"></a><span class="at">                      </span><span class="fu">type</span><span class="kw">:</span><span class="at"> text</span></span>
<span id="cb72-14"><a href="formatting-tables.html#cb72-14" aria-hidden="true" tabindex="-1"></a><span class="at">                      </span><span class="fu">combineBelow</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb72-15"><a href="formatting-tables.html#cb72-15" aria-hidden="true" tabindex="-1"></a><span class="at">                    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> index</span></span>
<span id="cb72-16"><a href="formatting-tables.html#cb72-16" aria-hidden="true" tabindex="-1"></a><span class="at">                      </span><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Index&quot;</span></span>
<span id="cb72-17"><a href="formatting-tables.html#cb72-17" aria-hidden="true" tabindex="-1"></a><span class="at">                      </span><span class="fu">type</span><span class="kw">:</span><span class="at"> text</span></span>
<span id="cb72-18"><a href="formatting-tables.html#cb72-18" aria-hidden="true" tabindex="-1"></a><span class="at">                    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> value</span></span>
<span id="cb72-19"><a href="formatting-tables.html#cb72-19" aria-hidden="true" tabindex="-1"></a><span class="at">                      </span><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Value&quot;</span></span>
<span id="cb72-20"><a href="formatting-tables.html#cb72-20" aria-hidden="true" tabindex="-1"></a><span class="at">                      </span><span class="fu">type</span><span class="kw">:</span><span class="at"> number</span></span>
<span id="cb72-21"><a href="formatting-tables.html#cb72-21" aria-hidden="true" tabindex="-1"></a><span class="at">                      </span><span class="fu">format</span><span class="kw">:</span><span class="at"> zto</span></span>
<span id="cb72-22"><a href="formatting-tables.html#cb72-22" aria-hidden="true" tabindex="-1"></a><span class="at">                    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> es_ci_lower</span></span>
<span id="cb72-23"><a href="formatting-tables.html#cb72-23" aria-hidden="true" tabindex="-1"></a><span class="at">                      </span><span class="fu">title</span><span class="kw">:</span><span class="at"> Lower</span></span>
<span id="cb72-24"><a href="formatting-tables.html#cb72-24" aria-hidden="true" tabindex="-1"></a><span class="at">                      </span><span class="fu">type</span><span class="kw">:</span><span class="at"> number</span></span>
<span id="cb72-25"><a href="formatting-tables.html#cb72-25" aria-hidden="true" tabindex="-1"></a><span class="at">                      </span><span class="fu">visible</span><span class="kw">:</span><span class="at"> (show_ci)</span></span>
<span id="cb72-26"><a href="formatting-tables.html#cb72-26" aria-hidden="true" tabindex="-1"></a><span class="at">                    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> es_ci_upper</span></span>
<span id="cb72-27"><a href="formatting-tables.html#cb72-27" aria-hidden="true" tabindex="-1"></a><span class="at">                      </span><span class="fu">title</span><span class="kw">:</span><span class="at"> Upper</span></span>
<span id="cb72-28"><a href="formatting-tables.html#cb72-28" aria-hidden="true" tabindex="-1"></a><span class="at">                      </span><span class="fu">type</span><span class="kw">:</span><span class="at"> number</span></span>
<span id="cb72-29"><a href="formatting-tables.html#cb72-29" aria-hidden="true" tabindex="-1"></a><span class="at">                      </span><span class="fu">visible</span><span class="kw">:</span><span class="at"> (show_ci)</span></span>
<span id="cb72-30"><a href="formatting-tables.html#cb72-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-31"><a href="formatting-tables.html#cb72-31" aria-hidden="true" tabindex="-1"></a><span class="co">#...#</span></span></code></pre></div>
<p>You can see that the two new columns, <code>es_ci_lower</code> and <code>es_ci_upper</code> have their visibility linked to the option <code>show_ci</code>. After compiling, we get the following behavior (you will fill up with data the new columns as usual, not shown here).</p>
<p><img src="pics/c7_output7.png" width="1019" />
<img src="pics/c7_output8.png" width="1106" /></p>
</div>
<div id="showing-columns-programmatically" class="section level2 hasAnchor" number="7.7">
<h2><span class="header-section-number">7.7</span> Showing columns programmatically<a href="formatting-tables.html#showing-columns-programmatically" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Another case is when a column visibility depends on your results. For example, in certain mixed models, <code>emmeans</code> R package can be used to obtain the estimated marginal means, that are returned with their CI and the degrees of freedom. However, when the number of rows in the data are too many, the DF are set to <code>Inf</code> (because the CI uses the z-test). So we want to hide the degrees of freedom column after <code>Inf</code> values are produced by our code.</p>
<p>To try out, we can reproduce this case in our <code>Runner</code> filling function of the table <code>anova</code> like this. We draw a uniform random number, if it is larger than .5 we set the <code>df1</code> column to Inf.</p>
<div class="filename">
<span class="filename">File: R/Runner.R (<a href='https://github.com/mcfanda/COOLj/tree/Version.0.0.7/R/Runner.R' target='_blank'>Online version</a>)</span>
</div>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="formatting-tables.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co">#...#</span></span>
<span id="cb73-2"><a href="formatting-tables.html#cb73-2" aria-hidden="true" tabindex="-1"></a>    run_main_anova<span class="ot">=</span><span class="cf">function</span>() {</span>
<span id="cb73-3"><a href="formatting-tables.html#cb73-3" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb73-4"><a href="formatting-tables.html#cb73-4" aria-hidden="true" tabindex="-1"></a>      .anova          <span class="ot">&lt;-</span>  <span class="fu">as.data.frame</span>(car<span class="sc">::</span><span class="fu">Anova</span>(self<span class="sc">$</span>model,<span class="at">type=</span><span class="dv">3</span>))</span>
<span id="cb73-5"><a href="formatting-tables.html#cb73-5" aria-hidden="true" tabindex="-1"></a>       <span class="fu">names</span>(.anova)  <span class="ot">&lt;-</span>  <span class="fu">c</span>(<span class="st">&quot;nothing&quot;</span>,<span class="st">&quot;df1&quot;</span>,<span class="st">&quot;test&quot;</span>,<span class="st">&quot;p&quot;</span>)</span>
<span id="cb73-6"><a href="formatting-tables.html#cb73-6" aria-hidden="true" tabindex="-1"></a>      .anova<span class="sc">$</span>df2      <span class="ot">&lt;-</span>  self<span class="sc">$</span>model<span class="sc">$</span>df.residual</span>
<span id="cb73-7"><a href="formatting-tables.html#cb73-7" aria-hidden="true" tabindex="-1"></a>       test           <span class="ot">&lt;-</span>   <span class="fu">runif</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>)<span class="sc">&gt;</span>.<span class="dv">5</span> <span class="co"># we simulate unneeded columns not expected apriori</span></span>
<span id="cb73-8"><a href="formatting-tables.html#cb73-8" aria-hidden="true" tabindex="-1"></a>       <span class="cf">if</span> (test) .anova<span class="sc">$</span>df1 <span class="ot">&lt;-</span> <span class="cn">Inf</span></span>
<span id="cb73-9"><a href="formatting-tables.html#cb73-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(.anova)</span>
<span id="cb73-10"><a href="formatting-tables.html#cb73-10" aria-hidden="true" tabindex="-1"></a>       </span>
<span id="cb73-11"><a href="formatting-tables.html#cb73-11" aria-hidden="true" tabindex="-1"></a>      },</span>
<span id="cb73-12"><a href="formatting-tables.html#cb73-12" aria-hidden="true" tabindex="-1"></a><span class="co">#...#</span></span></code></pre></div>
<p>If you try installing and play around with the GUI (just toggle one option on and off), every now and then you would see all <code>Inf</code> in the <code>df</code> column. When this happens, we want to hide the column. With this aim, we add the property <code>$hideOn</code> to the definition of the <code>SmartTable</code> in <code>.b.R</code> file.</p>
<div class="filename">
<span class="filename">File: R/myregression.b.R (<a href='https://github.com/mcfanda/COOLj/tree/Version.0.0.7/R/myregression.b.R' target='_blank'>Online version</a>)</span>
</div>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="formatting-tables.html#cb74-1" aria-hidden="true" tabindex="-1"></a>            atable<span class="ot">&lt;-</span>SmartTable<span class="sc">$</span><span class="fu">new</span>(self<span class="sc">$</span>results<span class="sc">$</span>main<span class="sc">$</span>anova,private<span class="sc">$</span>.runner)</span>
<span id="cb74-2"><a href="formatting-tables.html#cb74-2" aria-hidden="true" tabindex="-1"></a>            <span class="do">## here we hide `df1` when it receives NaN</span></span>
<span id="cb74-3"><a href="formatting-tables.html#cb74-3" aria-hidden="true" tabindex="-1"></a>            atable<span class="sc">$</span>hideOn <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">df1=</span><span class="cn">Inf</span>)</span>
<span id="cb74-4"><a href="formatting-tables.html#cb74-4" aria-hidden="true" tabindex="-1"></a>            private<span class="sc">$</span>.tables[[<span class="fu">length</span>(private<span class="sc">$</span>.tables)<span class="sc">+</span><span class="dv">1</span>]]<span class="ot">&lt;-</span>atable</span></code></pre></div>
<p>The property <code>$hideOn</code> accepts a named list, with format <code>list(columname=value)</code> where <code>value</code> is the value that, when received in the data, hides the column. Installing the module now and playing around should produce the expected behavior.</p>
</div>
<div id="changing-column-names-programmatically" class="section level2 hasAnchor" number="7.8">
<h2><span class="header-section-number">7.8</span> Changing column names programmatically<a href="formatting-tables.html#changing-column-names-programmatically" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Another case is when mutually alternative columns should be shown programmatically (after the results are produced). A case is when <code>car::Anova()</code> is applied to different linear models: It may produce a F-test or a Chi-square test. Obviously, one can program each case separately (with an S3 method, for instance), or simply change the name of the column reporting the test depending on the results.</p>
<p>To exemplify, let assume that you need to change the name of a column programmatically. You only need to attach to the data.frame passed to the table the attribute <code>titles</code>, as a named list of the form <code>list(columnname="new title")</code>. As follows:</p>
<div class="filename">
<span class="filename">File: R/Runner.R (<a href='https://github.com/mcfanda/COOLj/tree/Version.0.0.7/R/Runner.R' target='_blank'>Online version</a>)</span>
</div>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="formatting-tables.html#cb75-1" aria-hidden="true" tabindex="-1"></a>    run_main_anova<span class="ot">=</span><span class="cf">function</span>() {</span>
<span id="cb75-2"><a href="formatting-tables.html#cb75-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-3"><a href="formatting-tables.html#cb75-3" aria-hidden="true" tabindex="-1"></a>      .anova          <span class="ot">&lt;-</span>  <span class="fu">as.data.frame</span>(car<span class="sc">::</span><span class="fu">Anova</span>(self<span class="sc">$</span>model,<span class="at">type=</span><span class="dv">3</span>))</span>
<span id="cb75-4"><a href="formatting-tables.html#cb75-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">names</span>(.anova)   <span class="ot">&lt;-</span>  <span class="fu">c</span>(<span class="st">&quot;nothing&quot;</span>,<span class="st">&quot;df1&quot;</span>,<span class="st">&quot;test&quot;</span>,<span class="st">&quot;p&quot;</span>)</span>
<span id="cb75-5"><a href="formatting-tables.html#cb75-5" aria-hidden="true" tabindex="-1"></a>      .anova<span class="sc">$</span>df2      <span class="ot">&lt;-</span>  self<span class="sc">$</span>model<span class="sc">$</span>df.residual</span>
<span id="cb75-6"><a href="formatting-tables.html#cb75-6" aria-hidden="true" tabindex="-1"></a>      .anova<span class="sc">$</span>var      <span class="ot">&lt;-</span>   <span class="fu">rownames</span>(.anova)</span>
<span id="cb75-7"><a href="formatting-tables.html#cb75-7" aria-hidden="true" tabindex="-1"></a>       test1            <span class="ot">&lt;-</span>   <span class="fu">runif</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>)<span class="sc">&gt;</span>.<span class="dv">5</span> <span class="co"># we simulate unneeded columns not expected apriori</span></span>
<span id="cb75-8"><a href="formatting-tables.html#cb75-8" aria-hidden="true" tabindex="-1"></a>       <span class="cf">if</span> (test1) .anova<span class="sc">$</span>df1 <span class="ot">&lt;-</span> <span class="cn">Inf</span></span>
<span id="cb75-9"><a href="formatting-tables.html#cb75-9" aria-hidden="true" tabindex="-1"></a>       test2           <span class="ot">&lt;-</span>   <span class="fu">runif</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>)<span class="sc">&gt;</span>.<span class="dv">5</span></span>
<span id="cb75-10"><a href="formatting-tables.html#cb75-10" aria-hidden="true" tabindex="-1"></a>       <span class="cf">if</span> (test2) <span class="fu">attr</span>(.anova,<span class="st">&quot;titles&quot;</span>)<span class="ot">&lt;-</span><span class="fu">list</span>(<span class="at">test=</span><span class="st">&quot;Chi-squares&quot;</span>)</span>
<span id="cb75-11"><a href="formatting-tables.html#cb75-11" aria-hidden="true" tabindex="-1"></a>       <span class="fu">return</span>(.anova)</span>
<span id="cb75-12"><a href="formatting-tables.html#cb75-12" aria-hidden="true" tabindex="-1"></a>       </span>
<span id="cb75-13"><a href="formatting-tables.html#cb75-13" aria-hidden="true" tabindex="-1"></a>      },</span></code></pre></div>
<p>If you try out (flag and unflag some option in the GUI), you’ll see that the F-test column appears as Chi-square every now and then.</p>
</div>
<div id="super-titles" class="section level2 hasAnchor" number="7.9">
<h2><span class="header-section-number">7.9</span> Super Titles<a href="formatting-tables.html#super-titles" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>(ref. <a href='reference/SmartTable.html#active-bindings-1' target='_blank'>SmartTable$superTitle</a>)</p>
<p>The effect size table with the confidence intervals does not look fine (ignore that we did not fill the new column, it is not the point now).</p>
<p><img src="pics/c7_output8.png" width="1106" /></p>
<p>The <code>Upper</code> and <code>Lower</code> columns would look much better if they had a title over them, showing that they refer to the 95% confidence intervals. We can do that with supertitles. With <code>SmartTable</code> you simply add a supertitle as follows:</p>
<div class="filename">
<span class="filename">File: R/myregression.b.R (<a href='https://github.com/mcfanda/COOLj/tree/Version.0.0.7/R/myregression.b.R' target='_blank'>Online version</a>)</span>
</div>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="formatting-tables.html#cb76-1" aria-hidden="true" tabindex="-1"></a>            atable<span class="ot">&lt;-</span>SmartTable<span class="sc">$</span><span class="fu">new</span>(self<span class="sc">$</span>results<span class="sc">$</span>additional<span class="sc">$</span>effects,private<span class="sc">$</span>.runner)</span>
<span id="cb76-2"><a href="formatting-tables.html#cb76-2" aria-hidden="true" tabindex="-1"></a>            <span class="co"># ... #</span></span>
<span id="cb76-3"><a href="formatting-tables.html#cb76-3" aria-hidden="true" tabindex="-1"></a>            atable<span class="sc">$</span>superTitle <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">es_ci_lower=</span><span class="st">&quot;95% confidence interval&quot;</span>,<span class="at">es_ci_upper=</span><span class="st">&quot;95% confidence interval&quot;</span>)</span>
<span id="cb76-4"><a href="formatting-tables.html#cb76-4" aria-hidden="true" tabindex="-1"></a>            private<span class="sc">$</span>.tables[[<span class="fu">length</span>(private<span class="sc">$</span>.tables)<span class="sc">+</span><span class="dv">1</span>]]<span class="ot">&lt;-</span>atable</span></code></pre></div>
<p>The property <code>$superTitle</code> accepts a list of the format <code>list(columnname1="super title",columnname2="super title",...)</code>. Here we tell the table to put a super title to the two <code>es_ci_lower</code> and <code>es_ci_upper</code>, as shown here.</p>
<p><img src="pics/c7_output10.png" width="433" /></p>
</div>
<div id="something-else" class="section level2 hasAnchor" number="7.10">
<h2><span class="header-section-number">7.10</span> Something else<a href="formatting-tables.html#something-else" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>As a final touch, we can remove the ugly string representing the greek letters in table <code>additional_effects</code>. You can pass to a text columns any ascii value or UTF value. We can adjust the <code>init_[tablename]()</code> function to pass those values.</p>
<div class="filename">
<span class="filename">File: R/Runner.R (<a href='https://github.com/mcfanda/COOLj/tree/Version.0.0.7/R/Runner.R' target='_blank'>Online version</a>)</span>
</div>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="formatting-tables.html#cb77-1" aria-hidden="true" tabindex="-1"></a>    init_additional_effects<span class="ot">=</span><span class="cf">function</span>() {</span>
<span id="cb77-2"><a href="formatting-tables.html#cb77-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-3"><a href="formatting-tables.html#cb77-3" aria-hidden="true" tabindex="-1"></a>      covs      <span class="ot">&lt;-</span> self<span class="sc">$</span>analysis<span class="sc">$</span>options<span class="sc">$</span>covs</span>
<span id="cb77-4"><a href="formatting-tables.html#cb77-4" aria-hidden="true" tabindex="-1"></a>      es        <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;\u03b5&#39;</span>,<span class="st">&#39;\u03b7&#39;</span>,<span class="st">&#39;\u03c9&#39;</span>) <span class="do">## greek UTF for letter</span></span>
<span id="cb77-5"><a href="formatting-tables.html#cb77-5" aria-hidden="true" tabindex="-1"></a>      es        <span class="ot">&lt;-</span> <span class="fu">paste</span>(es,<span class="st">&#39;\u00B2&#39;</span>,<span class="at">sep=</span><span class="st">&quot;&quot;</span>) <span class="co"># UTF for square</span></span>
<span id="cb77-6"><a href="formatting-tables.html#cb77-6" aria-hidden="true" tabindex="-1"></a>      tab       <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">expand.grid</span>(covs,es))</span>
<span id="cb77-7"><a href="formatting-tables.html#cb77-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">names</span>(tab)<span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;var&quot;</span>,<span class="st">&quot;index&quot;</span>)</span>
<span id="cb77-8"><a href="formatting-tables.html#cb77-8" aria-hidden="true" tabindex="-1"></a>      tab       <span class="ot">&lt;-</span> tab[<span class="fu">order</span>(tab<span class="sc">$</span>var),]</span>
<span id="cb77-9"><a href="formatting-tables.html#cb77-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(tab)</span>
<span id="cb77-10"><a href="formatting-tables.html#cb77-10" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb77-11"><a href="formatting-tables.html#cb77-11" aria-hidden="true" tabindex="-1"></a>      },</span>
<span id="cb77-12"><a href="formatting-tables.html#cb77-12" aria-hidden="true" tabindex="-1"></a>    run_additional_effects<span class="ot">=</span><span class="cf">function</span>() {</span>
<span id="cb77-13"><a href="formatting-tables.html#cb77-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-14"><a href="formatting-tables.html#cb77-14" aria-hidden="true" tabindex="-1"></a>      eps       <span class="ot">&lt;-</span>  effectsize<span class="sc">::</span><span class="fu">epsilon_squared</span>(self<span class="sc">$</span>model)</span>
<span id="cb77-15"><a href="formatting-tables.html#cb77-15" aria-hidden="true" tabindex="-1"></a>      eps_df    <span class="ot">&lt;-</span>  <span class="fu">data.frame</span>(<span class="at">var=</span>eps<span class="sc">$</span>Parameter,<span class="at">value=</span>eps<span class="sc">$</span>Epsilon2)</span>
<span id="cb77-16"><a href="formatting-tables.html#cb77-16" aria-hidden="true" tabindex="-1"></a>      eta       <span class="ot">&lt;-</span>  effectsize<span class="sc">::</span><span class="fu">eta_squared</span>(self<span class="sc">$</span>model)</span>
<span id="cb77-17"><a href="formatting-tables.html#cb77-17" aria-hidden="true" tabindex="-1"></a>      eta_df    <span class="ot">&lt;-</span>  <span class="fu">data.frame</span>(<span class="at">var=</span>eta<span class="sc">$</span>Parameter,<span class="at">value=</span>eta<span class="sc">$</span>Eta2)</span>
<span id="cb77-18"><a href="formatting-tables.html#cb77-18" aria-hidden="true" tabindex="-1"></a>      omega     <span class="ot">&lt;-</span>  effectsize<span class="sc">::</span><span class="fu">omega_squared</span>(self<span class="sc">$</span>model)</span>
<span id="cb77-19"><a href="formatting-tables.html#cb77-19" aria-hidden="true" tabindex="-1"></a>      omega_df  <span class="ot">&lt;-</span>  <span class="fu">data.frame</span>(<span class="at">var=</span>eta<span class="sc">$</span>Parameter,<span class="at">value=</span>omega<span class="sc">$</span>Omega2)</span>
<span id="cb77-20"><a href="formatting-tables.html#cb77-20" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb77-21"><a href="formatting-tables.html#cb77-21" aria-hidden="true" tabindex="-1"></a>      tab       <span class="ot">&lt;-</span>  <span class="fu">as.data.frame</span>(<span class="fu">rbind</span>(eps_df,eta_df,omega_df))</span>
<span id="cb77-22"><a href="formatting-tables.html#cb77-22" aria-hidden="true" tabindex="-1"></a>      tab       <span class="ot">&lt;-</span>  tab[<span class="fu">order</span>(tab<span class="sc">$</span>var),]</span>
<span id="cb77-23"><a href="formatting-tables.html#cb77-23" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb77-24"><a href="formatting-tables.html#cb77-24" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(tab)</span>
<span id="cb77-25"><a href="formatting-tables.html#cb77-25" aria-hidden="true" tabindex="-1"></a>    },</span></code></pre></div>
<p><img src="pics/c7_output5.png" width="309" /></p>
<p>Notice that we define the columns <code>var</code> and <code>index</code> in <code>init_additional_effects</code> function, and we no longer pass these columns in the <code>run_additional_effects</code>. The general principle is: formatting in <code>init_tablename</code>, data in <code>run_tablename</code>.</p>
</div>
<div id="adding-columns-programmatically" class="section level2 hasAnchor" number="7.11">
<h2><span class="header-section-number">7.11</span> Adding columns programmatically<a href="formatting-tables.html#adding-columns-programmatically" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are occasions in which one cannot anticipate how many columns a table should have. A typical example is when you need to show a matrix, like a correlation matrix. Let us make an example planning to add a correlation matrix among all the covariates and the dependent variable.</p>
<p>First, we create a new table in the <code>.r.yaml</code> file with only one column, the column that will contain the variables names.</p>
<div class="filename">
<span class="filename">File: jamovi/myregression.r.yaml (<a href='https://github.com/mcfanda/COOLj/tree/Version.0.0.7/jamovi/myregression.r.yaml' target='_blank'>Online version</a>)</span>
</div>
<div class="sourceCode" id="cb78"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb78-1"><a href="formatting-tables.html#cb78-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-2"><a href="formatting-tables.html#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="at">       </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> correlations</span></span>
<span id="cb78-3"><a href="formatting-tables.html#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="at">         </span><span class="fu">title</span><span class="kw">:</span><span class="at">  Correlations</span></span>
<span id="cb78-4"><a href="formatting-tables.html#cb78-4" aria-hidden="true" tabindex="-1"></a><span class="at">         </span><span class="fu">type</span><span class="kw">:</span><span class="at"> Table</span></span>
<span id="cb78-5"><a href="formatting-tables.html#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="at">         </span><span class="fu">visible</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb78-6"><a href="formatting-tables.html#cb78-6" aria-hidden="true" tabindex="-1"></a><span class="at">         </span><span class="fu">columns</span><span class="kw">:</span></span>
<span id="cb78-7"><a href="formatting-tables.html#cb78-7" aria-hidden="true" tabindex="-1"></a><span class="at">                    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> var</span></span>
<span id="cb78-8"><a href="formatting-tables.html#cb78-8" aria-hidden="true" tabindex="-1"></a><span class="at">                      </span><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Variable&quot;</span></span>
<span id="cb78-9"><a href="formatting-tables.html#cb78-9" aria-hidden="true" tabindex="-1"></a><span class="at">                      </span><span class="fu">type</span><span class="kw">:</span><span class="at"> text</span></span></code></pre></div>
<p>Then we add a <code>SmartTable</code> to the <code>.b.R</code> file.</p>
<div class="filename">
<span class="filename">File: R/myregression.b.R (<a href='https://github.com/mcfanda/COOLj/tree/Version.0.0.7/R/myregression.b.R' target='_blank'>Online version</a>)</span>
</div>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="formatting-tables.html#cb79-1" aria-hidden="true" tabindex="-1"></a>           <span class="co"># set up the means SmartTable</span></span>
<span id="cb79-2"><a href="formatting-tables.html#cb79-2" aria-hidden="true" tabindex="-1"></a>            obj<span class="ot">&lt;-</span>SmartTable<span class="sc">$</span><span class="fu">new</span>(self<span class="sc">$</span>results<span class="sc">$</span>correlations,private<span class="sc">$</span>.runner)</span>
<span id="cb79-3"><a href="formatting-tables.html#cb79-3" aria-hidden="true" tabindex="-1"></a>            obj<span class="sc">$</span>expandOnInit  <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb79-4"><a href="formatting-tables.html#cb79-4" aria-hidden="true" tabindex="-1"></a>            obj<span class="sc">$</span>expandFrom    <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb79-5"><a href="formatting-tables.html#cb79-5" aria-hidden="true" tabindex="-1"></a>            private<span class="sc">$</span>.tables[[<span class="fu">length</span>(private<span class="sc">$</span>.tables)<span class="sc">+</span><span class="dv">1</span>]]<span class="ot">&lt;-</span>obj</span></code></pre></div>
<p>We define the <code>SmartTable</code> as all the other tables, but we set the <code>$expandOnInit</code> property to TRUE and <code>$expandFrom</code> set to 2. These two properties tell the table to expand columnwise adding any column that will be passed in the <code>init_correlations()</code> function in the <code>Runner</code>. The new columns are added from the second column on. By default, they are added on the left of the table.</p>
<p>Now we prepare the functions to fill the table in <code>Runner.R</code></p>
<div class="filename">
<span class="filename">File: R/Runner.R (<a href='https://github.com/mcfanda/COOLj/tree/Version.0.0.7/R/Runner.R' target='_blank'>Online version</a>)</span>
</div>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="formatting-tables.html#cb80-1" aria-hidden="true" tabindex="-1"></a>    init_correlations<span class="ot">=</span><span class="cf">function</span>() {</span>
<span id="cb80-2"><a href="formatting-tables.html#cb80-2" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb80-3"><a href="formatting-tables.html#cb80-3" aria-hidden="true" tabindex="-1"></a>      vars<span class="ot">&lt;-</span><span class="fu">c</span>(self<span class="sc">$</span>analysis<span class="sc">$</span>options<span class="sc">$</span>dep,self<span class="sc">$</span>analysis<span class="sc">$</span>options<span class="sc">$</span>covs)</span>
<span id="cb80-4"><a href="formatting-tables.html#cb80-4" aria-hidden="true" tabindex="-1"></a>      tab<span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(<span class="fu">matrix</span>(<span class="st">&quot;.&quot;</span>,<span class="at">nrow =</span> <span class="fu">length</span>(vars),<span class="at">ncol=</span><span class="fu">length</span>(vars)))</span>
<span id="cb80-5"><a href="formatting-tables.html#cb80-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">names</span>(tab)  <span class="ot">&lt;-</span> vars</span>
<span id="cb80-6"><a href="formatting-tables.html#cb80-6" aria-hidden="true" tabindex="-1"></a>      tab<span class="sc">$</span>var     <span class="ot">&lt;-</span> vars</span>
<span id="cb80-7"><a href="formatting-tables.html#cb80-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(tab)</span>
<span id="cb80-8"><a href="formatting-tables.html#cb80-8" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb80-9"><a href="formatting-tables.html#cb80-9" aria-hidden="true" tabindex="-1"></a>    }</span></code></pre></div>
<p>In the init function we pass a <code>data.frame</code> which has K+1 columns where K is the number of covariates and K rows. Notice that we fill the <code>var</code> variable with the names of the <code>covariate</code> and all other values equal to <code>"."</code>. <code>SmartTable</code> would consider <code>"."</code> as an empty value, but as compared with passing <code>NA</code>, will not consider the table filled, and thus will update it with the runTable.</p>
<p>Now we set the filling function:</p>
<div class="filename">
<span class="filename">File: R/Runner.R (<a href='https://github.com/mcfanda/COOLj/tree/Version.0.0.7/R/Runner.R' target='_blank'>Online version</a>)</span>
</div>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="formatting-tables.html#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co">#...#</span></span>
<span id="cb81-2"><a href="formatting-tables.html#cb81-2" aria-hidden="true" tabindex="-1"></a>    run_correlations<span class="ot">=</span><span class="cf">function</span>() {</span>
<span id="cb81-3"><a href="formatting-tables.html#cb81-3" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb81-4"><a href="formatting-tables.html#cb81-4" aria-hidden="true" tabindex="-1"></a>      vars<span class="ot">&lt;-</span><span class="fu">c</span>(self<span class="sc">$</span>analysis<span class="sc">$</span>options<span class="sc">$</span>dep,self<span class="sc">$</span>analysis<span class="sc">$</span>options<span class="sc">$</span>covs)</span>
<span id="cb81-5"><a href="formatting-tables.html#cb81-5" aria-hidden="true" tabindex="-1"></a>      tab<span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(<span class="fu">cor</span>(self<span class="sc">$</span>analysis<span class="sc">$</span>data[,vars]))</span>
<span id="cb81-6"><a href="formatting-tables.html#cb81-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(tab)</span>
<span id="cb81-7"><a href="formatting-tables.html#cb81-7" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb81-8"><a href="formatting-tables.html#cb81-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb81-9"><a href="formatting-tables.html#cb81-9" aria-hidden="true" tabindex="-1"></a><span class="co">#...#</span></span></code></pre></div>
<p><img src="pics/c7_output6.png" width="591" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="warning-failing-and-debuging.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="smart-tables-update.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["jmvScaffoldHowto.pdf", "jmvScaffoldHowto.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
